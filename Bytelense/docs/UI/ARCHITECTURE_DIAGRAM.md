# Bytelense Frontend Architecture Diagram

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER BROWSER                            â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    REACT APPLICATION                      â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚              APP COMPONENT                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚        ProfileContext (Global State)         â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  - User profile                              â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  - Authentication state                      â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  - Persists to localStorage                  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚        ErrorBoundary (Error Catcher)         â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  - Catches React errors                      â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  - Shows fallback UI                         â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  - Logs errors for debugging                 â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                      â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚            SCREEN ROUTER                     â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚                                              â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ LoginScreen    â”‚ â”€â”                      â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                      â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚           â”‚           â”‚                      â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚           â†“           â”‚                      â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                      â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ OnboardScreen  â”‚  â”‚ Conditional          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ Rendering            â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚           â”‚           â”‚ Based on             â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚           â†“           â”‚ State                â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                      â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  ScanScreen    â”‚ â”€â”˜                      â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                â”‚                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ Camera     â”‚ â”‚                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ Capture    â”‚ â”‚ â”€â”€â”€â”€ MediaDevices API   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      (Browser Native)   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                â”‚                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ Progress   â”‚ â”‚                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ Bar        â”‚ â”‚ â”€â”€â”€â”€ WebSocket Events   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚           â”‚                                   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚           â†“ (on scan_complete)               â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ VerdictScreen  â”‚                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                â”‚                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ Components:    â”‚                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â€¢ VerdictBadge â”‚                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â€¢ AllergenAlertâ”‚                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â€¢ ModBanner    â”‚                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â€¢ InsightSect  â”‚                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â€¢ NutritionCardâ”‚                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â€¢ ReasoningSectâ”‚                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â€¢ CitationList â”‚                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â€¢ RecommendSectâ”‚                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†• HTTP + WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND SERVER                             â”‚
â”‚                   (FastAPI + python-socketio)                   â”‚
â”‚                   http://localhost:8000                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagram

### Scan Flow (Happy Path)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USER    â”‚
â”‚  Clicks   â”‚
â”‚ "Capture" â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CameraCapture Component                â”‚
â”‚  1. Access camera (MediaDevices API)    â”‚
â”‚  2. Capture image                       â”‚
â”‚  3. Convert to base64                   â”‚
â”‚  4. Call onCapture(imageData)           â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ScanScreen Component                   â”‚
â”‚  1. Get profile from context            â”‚
â”‚  2. Call startScan(imageData, userName) â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  useScan Hook                           â”‚
â”‚  1. Check WebSocket connected           â”‚
â”‚  2. Emit 'start_scan' event             â”‚
â”‚  3. Set isScanning = true               â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ WebSocket emit
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACKEND                                â”‚
â”‚  Receives: start_scan event             â”‚
â”‚  Processes: Image â†’ Nutrition â†’ Score  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ WebSocket emit (multiple)
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  useScan Hook                           â”‚
â”‚  Receives: scan_progress events         â”‚
â”‚  {                                      â”‚
â”‚    stage: "detecting_barcode",          â”‚
â”‚    progress: 20,                        â”‚
â”‚    message: "Detecting barcode..."      â”‚
â”‚  }                                      â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ Callback: onProgress(data)
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ScanScreen Component                   â”‚
â”‚  1. Update progress state               â”‚
â”‚  2. Show progress bar (20%)             â”‚
â”‚  3. Display message                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      
      ... (4 more progress events) ...
      
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACKEND                                â”‚
â”‚  Emits: scan_complete                   â”‚
â”‚  {                                      â”‚
â”‚    result: DetailedAssessment {         â”‚
â”‚      scan_id: "uuid",                   â”‚
â”‚      final_score: 7.2,                  â”‚
â”‚      verdict: "good",                   â”‚
â”‚      highlights: [...],                 â”‚
â”‚      warnings: [...],                   â”‚
â”‚      // ... full assessment             â”‚
â”‚    }                                    â”‚
â”‚  }                                      â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ WebSocket emit
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  useScan Hook                           â”‚
â”‚  Receives: scan_complete event          â”‚
â”‚  1. Set isScanning = false              â”‚
â”‚  2. Call onComplete(assessment)         â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ Callback: onComplete(data)
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ScanScreen Component                   â”‚
â”‚  1. Store assessment in state           â”‚
â”‚  2. Navigate to VerdictScreen           â”‚
â”‚  3. Pass assessment as prop             â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VerdictScreen Component                â”‚
â”‚  1. Receive assessment prop             â”‚
â”‚  2. Conditionally render components:    â”‚
â”‚                                         â”‚
â”‚  if (score) â†’ VerdictBadge              â”‚
â”‚  if (allergen_alerts.length > 0) â†’      â”‚
â”‚      AllergenAlert                      â”‚
â”‚  if (moderation_message) â†’              â”‚
â”‚      ModerationBanner                   â”‚
â”‚  if (highlights.length > 0) â†’           â”‚
â”‚      InsightSection                     â”‚
â”‚  ... etc for all components             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USER    â”‚
â”‚   Sees    â”‚
â”‚  Verdict  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Hierarchy

```
App
â”œâ”€â”€ ProfileContext.Provider
â”‚   â””â”€â”€ ErrorBoundary
â”‚       â””â”€â”€ Router (conditional rendering)
â”‚           â”‚
â”‚           â”œâ”€â”€ LoginScreen
â”‚           â”‚   â””â”€â”€ LoginForm
â”‚           â”‚       â”œâ”€â”€ Input (shadcn/ui)
â”‚           â”‚       â””â”€â”€ Button (shadcn/ui)
â”‚           â”‚
â”‚           â”œâ”€â”€ OnboardingScreen (if new user)
â”‚           â”‚   â””â”€â”€ OnboardingWizard
â”‚           â”‚       â”œâ”€â”€ Form fields
â”‚           â”‚       â””â”€â”€ Button
â”‚           â”‚
â”‚           â”œâ”€â”€ ScanScreen (if authenticated)
â”‚           â”‚   â”œâ”€â”€ CameraCapture
â”‚           â”‚   â”‚   â”œâ”€â”€ video (native)
â”‚           â”‚   â”‚   â””â”€â”€ Button (capture)
â”‚           â”‚   â”‚
â”‚           â”‚   â”œâ”€â”€ ImageUpload (alternative)
â”‚           â”‚   â”‚   â””â”€â”€ input[type="file"]
â”‚           â”‚   â”‚
â”‚           â”‚   â””â”€â”€ ScanProgress
â”‚           â”‚       â”œâ”€â”€ Progress (shadcn/ui)
â”‚           â”‚       â””â”€â”€ Alert (shadcn/ui)
â”‚           â”‚
â”‚           â””â”€â”€ VerdictScreen (if scan complete)
â”‚               â”œâ”€â”€ VerdictBadge
â”‚               â”‚   â””â”€â”€ Badge (shadcn/ui)
â”‚               â”‚
â”‚               â”œâ”€â”€ AllergenAlert (conditional)
â”‚               â”‚   â””â”€â”€ Alert (destructive)
â”‚               â”‚
â”‚               â”œâ”€â”€ ModerationBanner (conditional)
â”‚               â”‚   â”œâ”€â”€ Alert
â”‚               â”‚   â””â”€â”€ Progress
â”‚               â”‚
â”‚               â”œâ”€â”€ InsightSection
â”‚               â”‚   â”œâ”€â”€ Card (highlights)
â”‚               â”‚   â”‚   â””â”€â”€ List of items
â”‚               â”‚   â””â”€â”€ Card (warnings)
â”‚               â”‚       â””â”€â”€ List of items
â”‚               â”‚
â”‚               â”œâ”€â”€ NutritionCard
â”‚               â”‚   â””â”€â”€ Card
â”‚               â”‚       â””â”€â”€ Progress bars
â”‚               â”‚
â”‚               â”œâ”€â”€ ReasoningSection
â”‚               â”‚   â””â”€â”€ Accordion (shadcn/ui)
â”‚               â”‚       â””â”€â”€ Numbered list
â”‚               â”‚
â”‚               â”œâ”€â”€ CitationList
â”‚               â”‚   â””â”€â”€ Card
â”‚               â”‚       â””â”€â”€ List of citations
â”‚               â”‚           â””â”€â”€ Link (clickable)
â”‚               â”‚
â”‚               â””â”€â”€ RecommendationSection (conditional)
â”‚                   â””â”€â”€ Card
â”‚                       â”œâ”€â”€ Timing info
â”‚                       â”œâ”€â”€ Portion info
â”‚                       â””â”€â”€ Alternatives list
```

---

## State Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STATE DIAGRAM                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GLOBAL STATE        â”‚
â”‚  (React Context)     â”‚
â”‚                      â”‚
â”‚  ProfileContext:     â”‚
â”‚  - profile: User     â”‚
â”‚  - setProfile()      â”‚
â”‚  - clearProfile()    â”‚
â”‚  - isAuthenticated   â”‚
â”‚                      â”‚
â”‚  Storage:            â”‚
â”‚  localStorage        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LOCAL STATE         â”‚
â”‚  (useState)          â”‚
â”‚                      â”‚
â”‚  Per Component:      â”‚
â”‚  - loading           â”‚
â”‚  - error             â”‚
â”‚  - form inputs       â”‚
â”‚  - modal open/closed â”‚
â”‚  - collapsed/expandedâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SCAN STATE          â”‚
â”‚  (WebSocket Events)  â”‚
â”‚                      â”‚
â”‚  useScan Hook:       â”‚
â”‚  - isConnected       â”‚
â”‚  - isScanning        â”‚
â”‚  - progress          â”‚
â”‚  - assessment        â”‚
â”‚  - error             â”‚
â”‚                      â”‚
â”‚  Source of Truth:    â”‚
â”‚  Backend (via WS)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Error Handling Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ERROR HANDLING                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    Error Occurs
                         â”‚
                         â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                 â”‚
    JavaScript                       Network
     Runtime                          Request
      Error                            Fails
        â”‚                                 â”‚
        â†“                                 â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Error  â”‚                      â”‚  catch   â”‚
   â”‚Boundary â”‚                      â”‚  block   â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
        â”‚                                â”‚
        â†“                                â†“
   Caught by                        Parse error
   nearest                          Get error code
   boundary                         Look up message
        â”‚                                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Format Error    â”‚
              â”‚  for User        â”‚
              â”‚                  â”‚
              â”‚  From Technical: â”‚
              â”‚  "TypeError:..." â”‚
              â”‚                  â”‚
              â”‚  To User-Friendlyâ”‚
              â”‚  "Something went â”‚
              â”‚   wrong. Please  â”‚
              â”‚   refresh."      â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Show Error UI  â”‚
              â”‚                 â”‚
              â”‚  Options:       â”‚
              â”‚  â€¢ Toast        â”‚
              â”‚  â€¢ Alert        â”‚
              â”‚  â€¢ Error screen â”‚
              â”‚  â€¢ Fallback UI  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Provide Action â”‚
              â”‚                 â”‚
              â”‚  â€¢ Retry button â”‚
              â”‚  â€¢ Refresh link â”‚
              â”‚  â€¢ Contact info â”‚
              â”‚  â€¢ Error code   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## TypeScript Type Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              TYPE SAFETY ARCHITECTURE                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Backend (Python)                   Frontend (TypeScript)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pydantic    â”‚                   â”‚  TypeScript      â”‚
â”‚   Models     â”‚                   â”‚  Interfaces      â”‚
â”‚              â”‚                   â”‚                  â”‚
â”‚ UserProfile  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚ UserProfile      â”‚
â”‚              â”‚  Manual           â”‚                  â”‚
â”‚ DetailedAsmt â”‚  Translation      â”‚ DetailedAsmt     â”‚
â”‚              â”‚  (for MVP)        â”‚                  â”‚
â”‚ ScanProgress â”‚                   â”‚ ScanProgress     â”‚
â”‚              â”‚                   â”‚                  â”‚
â”‚ ...          â”‚                   â”‚ ...              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                    â”‚
       â”‚ JSON over HTTP/WS                 â”‚
       â†“                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Runtime    â”‚                   â”‚   Type Guard     â”‚
â”‚    Data      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚   Validation     â”‚
â”‚              â”‚                   â”‚                  â”‚
â”‚ {            â”‚                   â”‚ function is...() â”‚
â”‚   score: 7.2 â”‚                   â”‚ {                â”‚
â”‚   verdict:   â”‚                   â”‚   return typeof  â”‚
â”‚   "good"     â”‚                   â”‚   ...            â”‚
â”‚ }            â”‚                   â”‚ }                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â†“
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚  TypeScript      â”‚
                                   â”‚  Compiler        â”‚
                                   â”‚  Verification    â”‚
                                   â”‚                  â”‚
                                   â”‚  âœ… Type safe    â”‚
                                   â”‚  âœ… Autocomplete â”‚
                                   â”‚  âœ… Refactoring  â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  PRODUCTION DEPLOYMENT                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Development                         Production
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                        â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Source     â”‚                   â”‚   Build Output   â”‚
â”‚   Code       â”‚                   â”‚                  â”‚
â”‚              â”‚  pnpm run build   â”‚   dist/          â”‚
â”‚  src/        â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚   â”œâ”€ index.html â”‚
â”‚  public/     â”‚                   â”‚   â”œâ”€ assets/     â”‚
â”‚  ...         â”‚                   â”‚   â”‚  â”œâ”€ app.js   â”‚
â”‚              â”‚                   â”‚   â”‚  â”œâ”€ app.css  â”‚
â”‚              â”‚                   â”‚   â”‚  â””â”€ ...      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â”‚ Upload
                                            â†“
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚   Static Hosting           â”‚
                           â”‚   (Vercel/Netlify/S3)      â”‚
                           â”‚                            â”‚
                           â”‚   https://bytelense.com    â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â”‚ CDN
                                        â†“
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚   User Browser             â”‚
                           â”‚   (Chrome/Firefox/Safari)  â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â”‚ HTTPS + WSS
                                        â†“
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚   Backend Server           â”‚
                           â”‚   (FastAPI + Ollama)       â”‚
                           â”‚                            â”‚
                           â”‚   https://api.bytelense.comâ”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## File Structure Visualization

```
docs/UI/
â”‚
â”œâ”€â”€ ğŸ“„ README.md                         (You are here!)
â”œâ”€â”€ ğŸ“˜ FRONTEND_ARCHITECTURE_PLAN.md     (Main design doc)
â”œâ”€â”€ ğŸš€ QUICK_START.md                    (30-min setup)
â”œâ”€â”€ ğŸ”§ TROUBLESHOOTING.md                (Error fixes)
â”œâ”€â”€ âœ… IMPLEMENTATION_CHECKLIST.md       (Verification)
â””â”€â”€ ğŸ“Š ARCHITECTURE_DIAGRAM.md           (This file)

src/
â”‚
â”œâ”€â”€ ğŸ“ types/                            (TypeScript definitions)
â”‚   â”œâ”€â”€ index.ts                         (Re-exports)
â”‚   â”œâ”€â”€ assessment.ts                    (DetailedAssessment, etc.)
â”‚   â”œâ”€â”€ profile.ts                       (UserProfile, etc.)
â”‚   â”œâ”€â”€ websocket.ts                     (Event types)
â”‚   â””â”€â”€ components.ts                    (Component props)
â”‚
â”œâ”€â”€ ğŸ“ components/
â”‚   â”œâ”€â”€ ğŸ“ ui/                           (shadcn/ui base)
â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”œâ”€â”€ card.tsx
â”‚   â”‚   â”œâ”€â”€ badge.tsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ auth/                         (Auth screens)
â”‚   â”‚   â”œâ”€â”€ LoginForm.tsx
â”‚   â”‚   â””â”€â”€ OnboardingWizard.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ scan/                         (Scan features)
â”‚   â”‚   â”œâ”€â”€ CameraCapture.tsx
â”‚   â”‚   â”œâ”€â”€ ImageUpload.tsx
â”‚   â”‚   â””â”€â”€ ScanProgress.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ verdict/                      (Verdict display)
â”‚   â”‚   â”œâ”€â”€ VerdictBadge.tsx             â­ Score display
â”‚   â”‚   â”œâ”€â”€ AllergenAlert.tsx            ğŸš¨ Allergens
â”‚   â”‚   â”œâ”€â”€ ModerationBanner.tsx         ğŸ“Š Daily tracking
â”‚   â”‚   â”œâ”€â”€ InsightSection.tsx           ğŸ’¡ Highlights/warnings
â”‚   â”‚   â”œâ”€â”€ NutritionCard.tsx            ğŸ Macros
â”‚   â”‚   â”œâ”€â”€ ReasoningSection.tsx         ğŸ¤” AI reasoning
â”‚   â”‚   â”œâ”€â”€ CitationList.tsx             ğŸ“š Sources
â”‚   â”‚   â””â”€â”€ RecommendationSection.tsx    ğŸ’¡ Alternatives
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ layout/                       (Layout components)
â”‚   â”‚   â”œâ”€â”€ Navbar.tsx
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â””â”€â”€ ErrorBoundary.tsx
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ screens/                      (Full pages)
â”‚       â”œâ”€â”€ LoginScreen.tsx
â”‚       â”œâ”€â”€ OnboardingScreen.tsx
â”‚       â”œâ”€â”€ ScanScreen.tsx
â”‚       â””â”€â”€ VerdictScreen.tsx
â”‚
â”œâ”€â”€ ğŸ“ lib/                              (Utilities)
â”‚   â”œâ”€â”€ api.ts                           (HTTP client)
â”‚   â”œâ”€â”€ websocket.ts                     (WebSocket client)
â”‚   â”œâ”€â”€ camera.ts                        (Camera utils)
â”‚   â””â”€â”€ utils.ts                         (General utils)
â”‚
â”œâ”€â”€ ğŸ“ hooks/                            (Custom hooks)
â”‚   â”œâ”€â”€ useWebSocket.ts                  (WebSocket hook)
â”‚   â”œâ”€â”€ useCamera.ts                     (Camera hook)
â”‚   â”œâ”€â”€ useProfile.ts                    (Profile hook)
â”‚   â””â”€â”€ useToast.ts                      (Toast hook)
â”‚
â”œâ”€â”€ ğŸ“ context/                          (React Context)
â”‚   â””â”€â”€ ProfileContext.tsx               (Global profile state)
â”‚
â”œâ”€â”€ ğŸ“ config/                           (Configuration)
â”‚   â””â”€â”€ constants.ts                     (API URLs, etc.)
â”‚
â”œâ”€â”€ ğŸ“ styles/                           (Global styles)
â”‚   â””â”€â”€ globals.css                      (Tailwind + custom)
â”‚
â”œâ”€â”€ App.tsx                              (Root component)
â””â”€â”€ main.tsx                             (Entry point)
```

---

## Technology Stack Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  TECHNOLOGY LAYERS                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 1: Build Tools
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Vite 5+             TypeScript 5+           pnpm 9+     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  Dev server          Type safety             Package mgr  â”‚
â”‚  Fast HMR            Autocomplete            Fast install â”‚
â”‚  Production build    Refactoring             Efficient    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 2: Core Framework
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  React 18+                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                â”‚
â”‚  â€¢ Components (functional + hooks)                        â”‚
â”‚  â€¢ Context API (global state)                             â”‚
â”‚  â€¢ Error Boundaries (error handling)                      â”‚
â”‚  â€¢ Hooks (useState, useEffect, useContext, custom)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 3: Styling
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tailwind CSS 3+          shadcn/ui (latest)             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
â”‚  Utility classes           Pre-built components           â”‚
â”‚  Responsive design         Accessible (Radix UI)          â”‚
â”‚  Dark mode support         Customizable                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 4: Communication
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  socket.io-client 4+      fetch API (native)             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€               â”‚
â”‚  WebSocket client          HTTP requests                  â”‚
â”‚  Auto-reconnection         Async/await                    â”‚
â”‚  Event-based               Promise-based                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 5: Browser APIs
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MediaDevices API         localStorage API               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€               â”‚
â”‚  Camera access             Profile persistence            â”‚
â”‚  Image capture             Settings storage               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 6: UI Enhancement
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  sonner                   lucide-react                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€                   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  Toast notifications      Icons library                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Key Design Patterns

### 1. Server-Driven UI Pattern

```
Backend (Python)              Frontend (TypeScript)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Generate data:                Render based on data:
{                             if (data.allergen_alerts.length > 0) {
  allergen_alerts: [...]        <AllergenAlert alerts={data.allergen_alerts} />
}                             }

Backend decides WHAT          Frontend decides HOW
```

### 2. Error Boundary Pattern

```
<ErrorBoundary fallback={<ErrorScreen />}>
  <Component />
</ErrorBoundary>

If Component throws error:
  â†’ Caught by ErrorBoundary
  â†’ Shows ErrorScreen instead
  â†’ Logs error for debugging
  â†’ App doesn't crash
```

### 3. Custom Hook Pattern

```
Component uses hook:          Hook manages complexity:
const { data, error } =       function useData() {
  useData();                    const [data, setData] = useState(null);
                                const [error, setError] = useState(null);
if (error) return <Error />;    // Fetch logic
return <Display data={data} />  return { data, error };
                              }
```

### 4. Conditional Rendering Pattern

```
Data-driven rendering:

{condition && <Component />}           // Show if true
{data ? <Display /> : <Loading />}    // Show based on data
{data?.field && <Display />}          // Optional chaining
```

---

## Performance Optimization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PERFORMANCE STRATEGIES                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Code Splitting (Vite automatic)
   â”œâ”€ Only load what's needed
   â”œâ”€ Lazy load screens
   â””â”€ Dynamic imports

2. Image Optimization
   â”œâ”€ Compress to 70% quality
   â”œâ”€ Resize before upload
   â””â”€ Use appropriate formats

3. Memoization (when needed)
   â”œâ”€ useMemo for expensive calculations
   â”œâ”€ useCallback for stable functions
   â””â”€ React.memo for pure components

4. WebSocket Optimization
   â”œâ”€ Binary format (not implemented)
   â”œâ”€ Compression (not implemented)
   â””â”€ Batching events (not implemented)

5. Bundle Size
   â”œâ”€ Tree shaking (Vite automatic)
   â”œâ”€ No unused dependencies
   â””â”€ Check with `pnpm run build`

Target: < 500 KB gzipped
```

---

**This diagram set provides a visual complement to the written documentation.**

For implementation details, see [FRONTEND_ARCHITECTURE_PLAN.md](./FRONTEND_ARCHITECTURE_PLAN.md)
